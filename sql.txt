drop table account;
drop table member;
drop table seller;
drop table category;
drop table product;
drop table product_iamge;
drop table cart_item;
create table temp_orders
drop table orders;
drop table order_item;
drop table email_verification;
drop table review;

drop sequence product_seq;
drop sequence image_seq;
drop sequence cart_item_seq;
drop sequence temp_orders_seq;
drop sequence orders_seq;
drop sequence review_seq;

create table account (
   username varchar2(10 char),
   password varchar2(60 char),
   email varchar2(30 char),
   signup_date date ,
   role varchar2(10 char),
   constraint account_pk_username primary key(username)
);

create table email_verification (
    email varchar2(30 char),
    code varchar2(10 char),
    create_at date,
    exprire_at date,
    is_verify number(1),
    constraint email_verification_pk_email primary key(email)
);

create table member (
   username varchar2(10 char),
   birth_date date,
   profile varchar2(15 char),
   member_level varchar2(10 char),
   order_count number(4) default 0,
   order_amount number(8) default 0,
   constraint member_pk_username primary key(username)
);

create table seller (
   username varchar2(10 char),
   company_name varchar2(20 char),
   representative varchar2(10 char),
   address varchar2(50 char),
   seller_level varchar2(10 char),
   sales_count number(5),
   sales_amount number(10),
   constraint seller_pk_username primary key(username)
);

create table category (
    id number(3) primary key,
    name varchar2(10 char),
    parent number(3)
);

create table product (
    id number(6),
    name varchar2(30 char),
    seller varchar2(10 char),
    info clob,
    price number(7),
    sales_count number(5),
    sales_amount number(10),
    total_rating number(6),
    review_count number(5),
    stock number(3),
    category number(3),
    constraint product_pk primary key(id)
);

create table product_image (
    id number(7),
    name varchar2(41 char),
    product_id number(6),
    constraint image_pk primary key(id)
);

create sequence product_seq;
create sequence product_image_seq;

create table cart_item (
    id number(7),
    username varchar2(10 char),
    product_id number(6),
    quantity number(2),
    constraint cart_item_pk primary key(id)
);

create sequence cart_item_seq;

create table temp_orders (
  temp_id number(7),
  cart_item_id number(7),
  username varchar2(10 char),
  product_id number(7),
  name varchar2(30 char),
  image varchar2(75 char),
  quantity number(2),
  total_price number(7),
  seller varchar2(10 char),
  constraint temp_orders_pk primary key(cart_id)
);

create sequence temp_orders_seq;

create table orders (
  id number(7),
  orderer varchar2(10 char),
  order_at date,
  zipcode varchar2(5 char),
  address varchar2(50 char),
  order_total_price number(10),
  constraint order_pk primary key(id)
);

create table order_item (
  id number(8),
  order_id number(7),
  product_id number(6),
  delivery_at date,
  cancel_at date,
  status varchar2(10 char),
  seller varchar2(10 char),
  quantity number(2),
  total_price number(10),
  review_writable number(1),
  constraint order_item_pk primary key(id)
);

create sequence orders_seq;
create sequence order_item_seq;

create table review (
  id number(7),
  writer varchar2(10 char),
  content varchar2(100 char),
  rating number(1),
  write_time date,
  product_id number(7),
  constraint review_pk primary key(id)
);

create sequence review_seq;

insert into category values(1, '간식', null);
insert into category values(2, '즉석식품', null);

insert into category values(11, '과자', 1);
insert into category values(12, '빙과', 1);
insert into category values(21, '라면', 2);
insert into category values(22, '통조림', 2);

insert into category values(111, '비스킷', 11);
insert into category values(112, '샌드', 11);
insert into category values(121, '콘아이스크림', 12);
insert into category values(122, '바아이스크림', 12);
insert into category values(211, '일반라면', 21);
insert into category values(212, '비빔면', 21);
insert into category values(221, '참치', 22);
insert into category values(222, '햄', 22);

commit;



